<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:py="http://genshi.edgewall.org/"
	xmlns:xi="http://www.w3.org/2001/XInclude">

<xi:include href="master.html" />

<head>
    <link rel="stylesheet" type="text/css" href="../css/search.css" />
    <title>NIMS Search</title>

    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"
	    py:if="False" />
    <script data-main="${tg.url('/javascript/search')}"
	    src="${tg.url('/javascript/require.js')}"></script>
    <script type="text/javascript" src="../javascript/jquery.qtip-1.0.0-rc3.min.js"></script>
    <script
	    src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
</head>

<body>
	<div id="epochs_pop" class="pop" style="display: none">
		<iframe src="" frameborder="no" />
	</div>
	<div id="datasets_pop" class="pop" style="display: none">
		<iframe id="edit_dataset_iframe" src="" frameborder="no" />
	</div>
    <!-- Banner used to show the error from js validation -->
    <div id='bannerjs'>
        <div class='hide' id="bannerjs-emptyfields">         
        </div>
        <div class='hide' id="bannerjs-errorstring">         
        </div>
        <div class='hide' id="bannerjs-errorints">         
        </div>
    </div>
        <!-- Banner used to show no results  -->
        <div class='hide' id='bannerpy'>
            <div id="bannerpy-content">
    
            </div>
        </div>
    
   
	<h2>Search</h2>

	<p>NIMS currently hosts ${dataset_cnt} datasets.</p>

	<form id="search_form" accept-charset="UTF-8">
		<div id="query_table" cellpadding="0" cellspacing="0">
            <div id='db_wrapper'>
                <div id='db_choice'>
                    <input id='data_checkBox' type="checkbox" name='choose_db' value='any_data'/>Include data I do not have access to
                </div>
                <div class='first_name'>
                    First Name&nbsp;<input id='first_name' type='text' name='subject_name' value=''/>
                </div>
                <div class='last_name'>
                    Last Name&nbsp;<input id='last_name' type='text' name='subject_name' value=''/>
                </div>
            </div>
            <div id='upper_Body'>
					<div class='criteriaBody' id="criteriaBody" >
						<div class='criteriaContainer' id="criteriaContainerA">
							<span id='select_param'> <select class="search_param" name="search_param">
									<option py:for="param in param_list" >${param}</option>
							</select>
							</span>
							<span class='variable_field'>
							<input class='required' id="search_query" name="search_query" type="text"
								size="30"></input>
                             <select class="scantype hide">
                                <option py:for="value in scantype_values" >${value}</option>
                            </select> 
                            <div class='field_information'></div>
							</span>
						</div>
						<div class='criteriaContainer' id="criteriaContainerB">
							<span id='select_param'> <select class="search_param" name="search_param">
									<option py:for="param in param_list" >${param}</option>
							</select>
							</span>
							<span>
                            <select class="scantype hide">
                                   <option py:for="value in scantype_values" >${value}</option>
                            </select> 
							<input class='required' id="search_query" name="search_query" type="text"
								size="30"></input>
    						<img class='removeCriteria hide' id="remove"
                                    src="../images/remove.png" title="Remove builder" />
                            <img class='addCriteria' id="newCriteria"
                                    src="../images/add.png" title="Add new builder" /> 
                            <div class='field_information'></div>
							</span>
						</div>
				    </div>
                </div>

			<div id="dates">
					<script>
						$(function() {
							$("#date_from").datepicker(
									{
										defaultDate : "-1m",
										changeMonth : true,
										changeYear : true,
										numberOfMonths : 2,
										maxDate : "+1d",
										onSelect : function(selectedDate) {
											$("#date_to").datepicker("option",
													"minDate", selectedDate);
										}
									});
							$("#date_to").datepicker(
									{
										defaultDate : "+0d",
										changeMonth : true,
										changeYear : true,
										numberOfMonths : 2,
										maxDate : "+1d",
										onSelect : function(selectedDate) {
											$("#date_from").datepicker(
													"option", "maxDate",
													selectedDate);
										}
									});
						});
					</script>
					<span><label for="date_from">From&nbsp;</label> <input type="text"
						size="10" id="date_from" name="date_from" /></span>
					<span><label for="date_to">to&nbsp;</label> <input type="text"
						size="10" id="date_to" name="date_to" /></span>
			</div>
			<div id='submitDiv'>
				<span><input type="submit" id="submit" value="Search" /></span>
				<span>
					<p id="n_results"></p>
				</span>
			</div>
		</div>
	</form>
	<table id="epochs" class="scrolltable" style="visibility: hidden">
		<thead>
			<tr>
				<py:for each="col in epoch_columns">
					<th py:with="name, cls = col" class="${cls}">${name}</th>
				</py:for>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
	<table id="datasets" class="scrolltable" style="visibility: hidden">
		<thead>
			<tr>
				<py:for each="col in dataset_columns">
					<th py:with="name, cls = col" class="${cls}">${name}</th>
				</py:for>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
</body>
</html>
